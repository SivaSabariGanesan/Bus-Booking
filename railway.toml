[build]
builder = "nixpacks"

[deploy]
startCommand = "cd backend && python manage.py runserver 0.0.0.0:8080 --settings=transport_booking.settings_production"
healthcheckPath = "/health/"
healthcheckTimeout = 100
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

[deploy.preDeploy]
cmds = [
    "python backend/manage.py migrate --settings=transport_booking.settings_production --noinput"
]

[env]
DJANGO_SETTINGS_MODULE = "transport_booking.settings_production"
